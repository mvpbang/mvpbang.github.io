<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>opensuse-microos-delete-snapshots - mvpbang</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="mvpbang"><meta name=description content="概述 不可变操作系统opensuse microos,解决删除历史快照
回滚 MicroOS 是个不可变的操作系统，可轻松回滚 不可变，磁盘上不会有更改 可重启，到旧的 BTRFS 快照来回滚 "><meta name=keywords content="mvpbang"><meta name=generator content="Hugo 0.109.0 with theme even"><link rel=canonical href=https://mvpbang.com/post/2022/opensuse-microos-delete-snapshots/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script>
<link href=/sass/main.min.64cde2c5850b06d3c56f0c74b725d4bdf393df50c9a92b98ffd59a4d5eefab93.css rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin=anonymous><meta property="og:title" content="opensuse-microos-delete-snapshots"><meta property="og:description" content="概述
不可变操作系统opensuse microos,解决删除历史快照

回滚
MicroOS 是个不可变的操作系统，可轻松回滚
不可变，磁盘上不会有更改
可重启，到旧的 BTRFS 快照来回滚
"><meta property="og:type" content="article"><meta property="og:url" content="https://mvpbang.com/post/2022/opensuse-microos-delete-snapshots/"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-12-02T22:03:57+08:00"><meta property="article:modified_time" content="2022-12-02T22:03:57+08:00"><meta itemprop=name content="opensuse-microos-delete-snapshots"><meta itemprop=description content="概述
不可变操作系统opensuse microos,解决删除历史快照

回滚
MicroOS 是个不可变的操作系统，可轻松回滚
不可变，磁盘上不会有更改
可重启，到旧的 BTRFS 快照来回滚
"><meta itemprop=datePublished content="2022-12-02T22:03:57+08:00"><meta itemprop=dateModified content="2022-12-02T22:03:57+08:00"><meta itemprop=wordCount content="1589"><meta itemprop=keywords content="opensuse,microos,"><meta name=twitter:card content="summary"><meta name=twitter:title content="opensuse-microos-delete-snapshots"><meta name=twitter:description content="概述
不可变操作系统opensuse microos,解决删除历史快照

回滚
MicroOS 是个不可变的操作系统，可轻松回滚
不可变，磁盘上不会有更改
可重启，到旧的 BTRFS 快照来回滚
"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>mvpbang</a></div><div class=mobile-navbar-icon><span></span>
<span></span>
<span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/><li class=mobile-menu-item>Home</li></a><a href=/search/><li class=mobile-menu-item>Search</li></a><a href=/post/><li class=mobile-menu-item>Archives</li></a><a href=/tags/><li class=mobile-menu-item>Tags</li></a><a href=/categories/><li class=mobile-menu-item>Categories</li></a><a href=/resume/><li class=mobile-menu-item>Resume</li></a><a href=/about/><li class=mobile-menu-item>About</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>mvpbang</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/>Home</a></li><li class=menu-item><a class=menu-item-link href=/search/>Search</a></li><li class=menu-item><a class=menu-item-link href=/post/>Archives</a></li><li class=menu-item><a class=menu-item-link href=/tags/>Tags</a></li><li class=menu-item><a class=menu-item-link href=/categories/>Categories</a></li><li class=menu-item><a class=menu-item-link href=/resume/>Resume</a></li><li class=menu-item><a class=menu-item-link href=/about/>About</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><article class=post><header class=post-header><h1 class=post-title>opensuse-microos-delete-snapshots</h1><div class=post-meta><span class=post-time>Fri, 02 Dec 2022 22:03:57</span>
<span class=more-meta>约 1589 字</span>
<span class=more-meta>预计阅读 4 分钟</span>
<span id=busuanzi_container_page_pv class=more-meta><span id=busuanzi_value_page_pv><img src=/img/spinner.svg alt=spinner.svg></span> 次阅读</span></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>文章目录</h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><ul><li><a href=#概述>概述</a></li><li><a href=#delete-snapshotdelete-disk-snapshots-in-suse>delete snapshot(delete disk snapshots in SUSE)</a></li><li><a href=#force-snapper>force snapper</a></li><li><a href=#btrfs>btrfs</a></li><li><a href=#link>link</a></li></ul></li></ul></nav></div></div><div class=post-outdated><div class=warn><p>【注意】最后更新于 <span class=timeago datetime=2022-12-02T22:03:57 title="December 2, 2022">December 2, 2022</span>，文中内容可能已过时，请谨慎使用。</p></div></div><div class=post-content><h2 id=概述>概述</h2><p>不可变操作系统opensuse microos,解决删除历史快照</p><ul><li>回滚
MicroOS 是个不可变的操作系统，可轻松回滚
不可变，磁盘上不会有更改
可重启，到旧的 BTRFS 快照来回滚</li></ul><p>#env</p><ul><li>opensuse-microos</li></ul><h2 id=delete-snapshotdelete-disk-snapshots-in-suse>delete snapshot(delete disk snapshots in SUSE)</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>#btrfs snapshot
</span></span><span class=line><span class=cl>/.snapshots/x/snapshot
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>//List available available snapper configs
</span></span><span class=line><span class=cl>gaga-90:~ # snapper list-configs
</span></span><span class=line><span class=cl>Config | Subvolume
</span></span><span class=line><span class=cl>-------+----------
</span></span><span class=line><span class=cl>root   | / 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>//List available available snapper configs
</span></span><span class=line><span class=cl>gaga-90:~ # snapper --config root list
</span></span><span class=line><span class=cl> # | Type   | Pre # | Date                     | User | Used Space | Cleanup | Description           | Userdata
</span></span><span class=line><span class=cl>---+--------+-------+--------------------------+------+------------+---------+-----------------------+---------
</span></span><span class=line><span class=cl>0  | single |       |                          | root |            |         | current               |         
</span></span><span class=line><span class=cl>8* | single |       | Fri Dec  2 21:30:19 2022 | root | 730.67 MiB |         | Snapshot Update of #7 |            //current from snapshot
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>//Delete snapshot based on snapshot number
</span></span><span class=line><span class=cl>snapper --config root delete 2
</span></span><span class=line><span class=cl>snapper --config root delete 1-10   //delete number 1..10
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>gaga-90:~ # snapper --config root delete 8
</span></span><span class=line><span class=cl>Cannot delete snapshot 8 since it is the currently mounted snapshot.   //不可变
</span></span><span class=line><span class=cl>gaga-90:~ # snapper --config root delete 0
</span></span><span class=line><span class=cl>Cannot delete snapshot 0 since it is the current system.  //挂载可写层
</span></span></code></pre></td></tr></table></div></div><h2 id=force-snapper>force snapper</h2><p>#问题</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>gaga-90:~ # transactional-update status
</span></span><span class=line><span class=cl>transactional-update 4.1.0 started
</span></span><span class=line><span class=cl>Options: status
</span></span><span class=line><span class=cl>Separate /var detected.
</span></span><span class=line><span class=cl>--------------------------------------------------------------------------------------------------------------------
</span></span><span class=line><span class=cl>Snapshot:          8* [2022-12-02 13:30:19]
</span></span><span class=line><span class=cl>Description:       Snapshot Update of #7
</span></span><span class=line><span class=cl>(Missing status file)
</span></span><span class=line><span class=cl>--------------------------------------------------------------------------------------------------------------------
</span></span><span class=line><span class=cl>grep: /.snapshots/3/info.xml: No such file or directory   //由于人工删除过目录导致异常，必须强制删除
</span></span><span class=line><span class=cl>/sbin/transactional-update: line 720: [: : integer expression expected
</span></span><span class=line><span class=cl>/sbin/transactional-update: line 722: [: : integer expression expected
</span></span><span class=line><span class=cl>grep: /.snapshots/3/info.xml: No such file or directory
</span></span><span class=line><span class=cl>grep: /.snapshots/3/info.xml: No such file or directory
</span></span><span class=line><span class=cl>grep: /.snapshots/3/info.xml: No such file or directory
</span></span><span class=line><span class=cl>Snapshot:           []
</span></span><span class=line><span class=cl>grep: /.snapshots/3/info.xml: No such file or directory
</span></span><span class=line><span class=cl>Description:       
</span></span><span class=line><span class=cl>(Missing status file)
</span></span><span class=line><span class=cl>--------------------------------------------------------------------------------------------------------------------
</span></span><span class=line><span class=cl>grep: /.snapshots/2/info.xml: No such file or directory
</span></span><span class=line><span class=cl>/sbin/transactional-update: line 720: [: : integer expression expected
</span></span><span class=line><span class=cl>/sbin/transactional-update: line 722: [: : integer expression expected
</span></span><span class=line><span class=cl>grep: /.snapshots/2/info.xml: No such file or directory
</span></span><span class=line><span class=cl>grep: /.snapshots/2/info.xml: No such file or directory
</span></span><span class=line><span class=cl>grep: /.snapshots/2/info.xml: No such file or directory
</span></span><span class=line><span class=cl>Snapshot:           []
</span></span><span class=line><span class=cl>grep: /.snapshots/2/info.xml: No such file or directory
</span></span><span class=line><span class=cl>Description:       
</span></span><span class=line><span class=cl>(Missing status file)
</span></span></code></pre></td></tr></table></div></div><p>#解决</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>transactional-update status
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>btrfs subvolume delete /.snapshots/SNAPSHOTNUMBER/snapshot
</span></span><span class=line><span class=cl>rm -rf /.snapshots/SNAPSHOTNUMBER
</span></span></code></pre></td></tr></table></div></div><h2 id=btrfs>btrfs</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>gaga-90:~ # btrfs --help
</span></span><span class=line><span class=cl>usage: btrfs [--help] [--version] [--format &lt;format&gt;] [-v|--verbose] [-q|--quiet] &lt;group&gt; [&lt;group&gt;...] &lt;command&gt; [&lt;args&gt;]
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    btrfs balance start [options] &lt;path&gt;
</span></span><span class=line><span class=cl>        Balance chunks across the devices
</span></span><span class=line><span class=cl>    btrfs balance pause &lt;path&gt;
</span></span><span class=line><span class=cl>        Pause running balance
</span></span><span class=line><span class=cl>    btrfs balance cancel &lt;path&gt;
</span></span><span class=line><span class=cl>        Cancel running or paused balance
</span></span><span class=line><span class=cl>    btrfs balance resume &lt;path&gt;
</span></span><span class=line><span class=cl>        Resume interrupted balance
</span></span><span class=line><span class=cl>    btrfs balance status [-v] &lt;path&gt;
</span></span><span class=line><span class=cl>        Show status of running or paused balance
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    btrfs check [options] &lt;device&gt;
</span></span><span class=line><span class=cl>        Check structural integrity of a filesystem (unmounted).
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    btrfs device add [options] &lt;device&gt; [&lt;device&gt;...] &lt;path&gt;
</span></span><span class=line><span class=cl>        Add one or more devices to a mounted filesystem.
</span></span><span class=line><span class=cl>    btrfs device delete &lt;device&gt;|&lt;devid&gt; [&lt;device&gt;|&lt;devid&gt;...] &lt;path&gt;
</span></span><span class=line><span class=cl>    btrfs device remove &lt;device&gt;|&lt;devid&gt; [&lt;device&gt;|&lt;devid&gt;...] &lt;path&gt;
</span></span><span class=line><span class=cl>        Remove a device from a filesystem
</span></span><span class=line><span class=cl>    btrfs device replace &lt;command&gt; [...]
</span></span><span class=line><span class=cl>    	Replace a device (alias of &#34;btrfs replace&#34;)
</span></span><span class=line><span class=cl>    btrfs device scan [-d|--all-devices] &lt;device&gt; [&lt;device&gt;...]
</span></span><span class=line><span class=cl>    btrfs device scan -u|--forget [&lt;device&gt;...]
</span></span><span class=line><span class=cl>        Scan or forget (unregister) devices of btrfs filesystems
</span></span><span class=line><span class=cl>    btrfs device ready &lt;device&gt;
</span></span><span class=line><span class=cl>        Check and wait until a group of devices of a filesystem is ready for mount
</span></span><span class=line><span class=cl>    btrfs device stats [options] &lt;path&gt;|&lt;device&gt;
</span></span><span class=line><span class=cl>        Show device IO error statistics
</span></span><span class=line><span class=cl>    btrfs device usage [options] &lt;path&gt; [&lt;path&gt;..]
</span></span><span class=line><span class=cl>        Show detailed information about internal allocations in devices.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    btrfs filesystem df [options] &lt;path&gt;
</span></span><span class=line><span class=cl>        Show space usage information for a mount point
</span></span><span class=line><span class=cl>    btrfs filesystem du [options] &lt;path&gt; [&lt;path&gt;..]
</span></span><span class=line><span class=cl>        Summarize disk usage of each file.
</span></span><span class=line><span class=cl>    btrfs filesystem show [options] [&lt;path&gt;|&lt;uuid&gt;|&lt;device&gt;|label]
</span></span><span class=line><span class=cl>        Show the structure of a filesystem
</span></span><span class=line><span class=cl>    btrfs filesystem sync &lt;path&gt;
</span></span><span class=line><span class=cl>        Force a sync on a filesystem
</span></span><span class=line><span class=cl>    btrfs filesystem defragment [options] &lt;file&gt;|&lt;dir&gt; [&lt;file&gt;|&lt;dir&gt;...]
</span></span><span class=line><span class=cl>        Defragment a file or a directory
</span></span><span class=line><span class=cl>    btrfs filesystem resize [options] [devid:][+/-]&lt;newsize&gt;[kKmMgGtTpPeE]|[devid:]max &lt;path&gt;
</span></span><span class=line><span class=cl>        Resize a filesystem
</span></span><span class=line><span class=cl>    btrfs filesystem label [&lt;device&gt;|&lt;mount_point&gt;] [&lt;newlabel&gt;]
</span></span><span class=line><span class=cl>        Get or change the label of a filesystem
</span></span><span class=line><span class=cl>    btrfs filesystem usage [options] &lt;path&gt; [&lt;path&gt;..]
</span></span><span class=line><span class=cl>        Show detailed information about internal filesystem usage .
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    btrfs inspect-internal inode-resolve [-v] &lt;inode&gt; &lt;path&gt;
</span></span><span class=line><span class=cl>        Get file system paths for the given inode
</span></span><span class=line><span class=cl>    btrfs inspect-internal logical-resolve [-Pvo] [-s bufsize] &lt;logical&gt; &lt;path&gt;
</span></span><span class=line><span class=cl>        Get file system paths for the given logical address
</span></span><span class=line><span class=cl>    btrfs inspect-internal subvolid-resolve &lt;subvolid&gt; &lt;path&gt;
</span></span><span class=line><span class=cl>        Get file system paths for the given subvolume ID.
</span></span><span class=line><span class=cl>    btrfs inspect-internal rootid &lt;path&gt;
</span></span><span class=line><span class=cl>        Get tree ID of the containing subvolume of path.
</span></span><span class=line><span class=cl>    btrfs inspect-internal min-dev-size [options] &lt;path&gt;
</span></span><span class=line><span class=cl>        Get the minimum size the device can be shrunk to
</span></span><span class=line><span class=cl>    btrfs inspect-internal dump-tree [options] &lt;device&gt; [&lt;device&gt; ..]
</span></span><span class=line><span class=cl>        Dump tree structures from a given device
</span></span><span class=line><span class=cl>    btrfs inspect-internal dump-super [options] device [device...]
</span></span><span class=line><span class=cl>        Dump superblock from a device in a textual form
</span></span><span class=line><span class=cl>    btrfs inspect-internal tree-stats [options] &lt;device&gt;
</span></span><span class=line><span class=cl>        Print various stats for trees
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    btrfs property get [-t &lt;type&gt;] &lt;object&gt; [&lt;name&gt;]
</span></span><span class=line><span class=cl>        Get a property value of a btrfs object
</span></span><span class=line><span class=cl>    btrfs property set [-f] [-t &lt;type&gt;] &lt;object&gt; &lt;name&gt; &lt;value&gt;
</span></span><span class=line><span class=cl>        Set a property on a btrfs object
</span></span><span class=line><span class=cl>    btrfs property list [-t &lt;type&gt;] &lt;object&gt;
</span></span><span class=line><span class=cl>        Lists available properties with their descriptions for the given object
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    btrfs qgroup assign [options] &lt;src&gt; &lt;dst&gt; &lt;path&gt;
</span></span><span class=line><span class=cl>        Assign SRC as the child qgroup of DST
</span></span><span class=line><span class=cl>    btrfs qgroup remove [options] &lt;src&gt; &lt;dst&gt; &lt;path&gt;
</span></span><span class=line><span class=cl>        Remove a child qgroup SRC from DST.
</span></span><span class=line><span class=cl>    btrfs qgroup create &lt;qgroupid&gt; &lt;path&gt;
</span></span><span class=line><span class=cl>        Create a subvolume quota group.
</span></span><span class=line><span class=cl>    btrfs qgroup destroy &lt;qgroupid&gt; &lt;path&gt;
</span></span><span class=line><span class=cl>        Destroy a quota group.
</span></span><span class=line><span class=cl>    btrfs qgroup show [options] &lt;path&gt;
</span></span><span class=line><span class=cl>        Show subvolume quota groups.
</span></span><span class=line><span class=cl>    btrfs qgroup limit [options] &lt;size&gt;|none [&lt;qgroupid&gt;] &lt;path&gt;
</span></span><span class=line><span class=cl>        Set the limits a subvolume quota group.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    btrfs quota enable &lt;path&gt;
</span></span><span class=line><span class=cl>        Enable subvolume quota support for a filesystem.
</span></span><span class=line><span class=cl>    btrfs quota disable &lt;path&gt;
</span></span><span class=line><span class=cl>        Disable subvolume quota support for a filesystem.
</span></span><span class=line><span class=cl>    btrfs quota rescan [-sw] &lt;path&gt;
</span></span><span class=line><span class=cl>        Trash all qgroup numbers and scan the metadata again with the current config.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    btrfs receive [options] &lt;mount&gt;
</span></span><span class=line><span class=cl>    btrfs receive --dump [options]
</span></span><span class=line><span class=cl>        Receive subvolumes from a stream
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    btrfs replace start [-Bfr] &lt;srcdev&gt;|&lt;devid&gt; &lt;targetdev&gt; &lt;mount_point&gt;
</span></span><span class=line><span class=cl>        Replace device of a btrfs filesystem.
</span></span><span class=line><span class=cl>    btrfs replace status [-1] &lt;mount_point&gt;
</span></span><span class=line><span class=cl>        Print status and progress information of a running device replace operation
</span></span><span class=line><span class=cl>    btrfs replace cancel &lt;mount_point&gt;
</span></span><span class=line><span class=cl>        Cancel a running device replace operation.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    btrfs rescue chunk-recover [options] &lt;device&gt;
</span></span><span class=line><span class=cl>        Recover the chunk tree by scanning the devices one by one.
</span></span><span class=line><span class=cl>    btrfs rescue super-recover [options] &lt;device&gt;
</span></span><span class=line><span class=cl>        Recover bad superblocks from good copies
</span></span><span class=line><span class=cl>    btrfs rescue zero-log &lt;device&gt;
</span></span><span class=line><span class=cl>        Clear the tree log. Usable if it&#39;s corrupted and prevents mount.
</span></span><span class=line><span class=cl>    btrfs rescue fix-device-size &lt;device&gt;
</span></span><span class=line><span class=cl>        Re-align device and super block sizes. Usable if newer kernel refuse to mount it due to mismatch super size
</span></span><span class=line><span class=cl>    btrfs rescue create-control-device
</span></span><span class=line><span class=cl>        Create /dev/btrfs-control (see &#39;CONTROL DEVICE&#39; in btrfs(5))
</span></span><span class=line><span class=cl>    btrfs rescue clear-uuid-tree
</span></span><span class=line><span class=cl>        Delete uuid tree so that kernel can rebuild it at mount time
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    btrfs restore [options] &lt;device&gt; &lt;path&gt;
</span></span><span class=line><span class=cl>    btrfs restore [options] -l &lt;device&gt;
</span></span><span class=line><span class=cl>        Try to restore files from a damaged filesystem (unmounted)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    btrfs scrub start [-BdqrRf] [-c ioprio_class -n ioprio_classdata] &lt;path&gt;|&lt;device&gt;
</span></span><span class=line><span class=cl>        Start a new scrub. If a scrub is already running, the new one fails.
</span></span><span class=line><span class=cl>    btrfs scrub cancel &lt;path&gt;|&lt;device&gt;
</span></span><span class=line><span class=cl>        Cancel a running scrub
</span></span><span class=line><span class=cl>    btrfs scrub resume [-BdqrR] [-c ioprio_class -n ioprio_classdata] &lt;path&gt;|&lt;device&gt;
</span></span><span class=line><span class=cl>        Resume previously canceled or interrupted scrub
</span></span><span class=line><span class=cl>    btrfs scrub status [-dR] &lt;path&gt;|&lt;device&gt;
</span></span><span class=line><span class=cl>        Show status of running or finished scrub
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    btrfs send [-ve] [-p &lt;parent&gt;] [-c &lt;clone-src&gt;] [-f &lt;outfile&gt;] &lt;subvol&gt; [&lt;subvol&gt;...]
</span></span><span class=line><span class=cl>        Send the subvolume(s) to stdout.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    btrfs subvolume create [-i &lt;qgroupid&gt;] [&lt;dest&gt;/]&lt;name&gt;
</span></span><span class=line><span class=cl>        Create a subvolume
</span></span><span class=line><span class=cl>    btrfs subvolume delete [options] &lt;subvolume&gt; [&lt;subvolume&gt;...]
</span></span><span class=line><span class=cl>    btrfs subvolume delete [options] -i|--subvolid &lt;subvolid&gt; &lt;path&gt;  //删除subvolume
</span></span><span class=line><span class=cl>        Delete subvolume(s)
</span></span><span class=line><span class=cl>    btrfs subvolume list [options] &lt;path&gt;
</span></span><span class=line><span class=cl>        List subvolumes and snapshots in the filesystem.
</span></span><span class=line><span class=cl>    btrfs subvolume snapshot [-r] [-i &lt;qgroupid&gt;] &lt;subvolume&gt; { &lt;subdir&gt;/&lt;name&gt; | &lt;subdir&gt; }
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>    btrfs subvolume get-default &lt;path&gt;
</span></span><span class=line><span class=cl>        Get the default subvolume of a filesystem
</span></span><span class=line><span class=cl>    btrfs subvolume set-default &lt;subvolume&gt;
</span></span><span class=line><span class=cl>    btrfs subvolume set-default &lt;subvolid&gt; &lt;path&gt;
</span></span><span class=line><span class=cl>        Set the default subvolume of the filesystem mounted as default.
</span></span><span class=line><span class=cl>    btrfs subvolume find-new &lt;path&gt; &lt;lastgen&gt;
</span></span><span class=line><span class=cl>        List the recently modified files in a filesystem
</span></span><span class=line><span class=cl>    btrfs subvolume show [options] &lt;path&gt;
</span></span><span class=line><span class=cl>        Show more information about the subvolume (UUIDs, generations, times, snapshots)
</span></span><span class=line><span class=cl>    btrfs subvolume sync &lt;path&gt; [&lt;subvol-id&gt;...]
</span></span><span class=line><span class=cl>        Wait until given subvolume(s) are completely removed from the filesystem.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    btrfs help [--full] [--box]
</span></span><span class=line><span class=cl>        Display help information
</span></span><span class=line><span class=cl>    btrfs version
</span></span><span class=line><span class=cl>        Display btrfs-progs version
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Use --help as an argument for information on a specific group or command.
</span></span><span class=line><span class=cl>Options for --format are: text, json
</span></span><span class=line><span class=cl>gaga-90:~ # 
</span></span></code></pre></td></tr></table></div></div><h2 id=link>link</h2><ul><li><a href=https://forums.opensuse.org/showthread.php/527454-Can-t-delete-Snapper-snapshots>https://forums.opensuse.org/showthread.php/527454-Can-t-delete-Snapper-snapshots</a></li></ul></div><div class=post-copyright><p class=copyright-item><span class=item-title>文章作者</span>
<span class=item-content>mvpbang</span></p><p class=copyright-item><span class=item-title>上次更新</span>
<span class=item-content>Fri, 02 Dec 2022 22:03:57</span></p><p class=copyright-item><span class=item-title>许可协议</span>
<span class=item-content><a rel=mulanpsl-2.0 href=http://license.coscl.org.cn/MulanPSL2 target=_blank>MulanPSL-2.0</a></span></p></div><footer class=post-footer><div class=post-tags><a href=/tags/opensuse/>opensuse</a>
<a href=/tags/microos/>microos</a></div><nav class=post-nav><a class=prev href=/post/2022/redis-migrate/><i class="iconfont icon-left"></i>
<span class="prev-text nav-default">redis-migrate(迁移)</span>
<span class="prev-text nav-mobile">上一篇</span></a>
<a class=next href=/post/2022/openkylin-desktop/><span class="next-text nav-default">openkylin-desktop</span>
<span class="next-text nav-mobile">下一篇</span>
<i class="iconfont icon-right"></i></a></nav></footer></article><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?55430785a3abd7c48862081a9b03833b",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></div></div></main><footer id=footer class=footer><div class=social-links><a href=mailto:mvpbang@163.com class="iconfont icon-email" title=email></a>
<a href=https://mvpbang.com/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a></div><div class=copyright><div class=busuanzi-footer><span id=busuanzi_container_site_pv>本站总访问量 <span id=busuanzi_value_site_pv><img src=/img/spinner.svg alt=spinner.svg></span> 次</span>
<span class=division>|</span>
<span id=busuanzi_container_site_uv>本站总访客数 <span id=busuanzi_value_site_uv><img src=/img/spinner.svg alt=spinner.svg></span> 人</span></div><span class=copyright-year>&copy;
2021 -
2024<span class=heart><i class="iconfont icon-heart"></i></span><span>mvpbang</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.min.js integrity="sha256-jwCP0NAdCBloaIWTWHmW4i3snUNMHUNO+jr9rYd2iOI=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.locales.min.js integrity="sha256-ZwofwC1Lf/faQCzN7nZtfijVV6hSwxjQMwXL4gn9qU8=" crossorigin=anonymous></script>
<script>var languageCode="zh-cn".replace(/-/g,"_").replace(/_(.*)/,function(e,t){return e.replace(t,t.toUpperCase())});timeago().render(document.querySelectorAll(".timeago"),languageCode),timeago.cancel()</script><script type=text/javascript src=/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js></script></body></html>